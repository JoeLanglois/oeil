{"version":3,"file":"oeil.mjs","sources":["../src/index.js"],"sourcesContent":["function parseQuery (query) {\n  let isId = false;\n  let isClass = false;\n  let tag = '';\n  let id = '';\n  let className = '';\n\n  for (var i = 0; i < query.length; i++) {\n    const char = query[i];\n    if (char === '.') {\n      isClass = true;\n      isId = false;\n      if (className.length > 0) {\n        className += ' ';\n      }\n    } else if (char === '#') {\n      isId = true;\n      isClass = false;\n    } else if (isId) {\n      id += char;\n    } else if (isClass) {\n      className += char;\n    } else {\n      tag += char;\n    }\n  }\n\n  return {\n    tag: tag || 'div',\n    id,\n    className\n  };\n}\n\nexport function refs(el){\n  let els = el.querySelectorAll('[id]')\n\n  return Array.from(els).reduce((acc, el) => {\n    acc[el.id] = el\n    return acc\n  }, {})  \n}\n\nexport function view(arr = []){\n let queryStr = arr[0]\n const query = parseQuery(queryStr)\n \n let tag = query.tag\n    , props = {class: query.className, id: query.id}\n    , children = []\n \n \n \n let el = document.createElement(tag)\n \n let typeSecondArg = typeof arr[1]\n\n // If it's an object and not an array\n if(typeSecondArg === 'object' && !arr[1].length){\n  props = {...props, ...arr[1]}\n  children = arr.slice(2)\n } else if (typeSecondArg === 'string') {\n    children = [arr[1]]\n } else {\n   children = arr.slice(1)\n }\n \n // Apply props\n Object.keys(props).forEach(attr => {\n  let prefix = attr.slice(0,2)\n  \n  // Support event handlers\n  if(prefix == 'on') {\n    el[attr] = props[attr]\n  } else {\n    if(props[attr] !== '') {\n      el.setAttribute(attr, props[attr])      \n    }\n  }\n })\n \n // Apply children\n children.forEach(c => {\n   if(typeof c === 'string') {\n     el.textContent = c\n   } else {\n     el.appendChild(view(c))\n   }\n })\n \n return el\n}"],"names":["refs","el","els","querySelectorAll","Array","from","reduce","acc","id","view","arr","query","isId","isClass","tag","className","i","length","char","parseQuery","props","class","children","document","createElement","typeSecondArg","slice","Object","keys","forEach","attr","setAttribute","c","textContent","appendChild"],"mappings":"AAkCO,SAASA,EAAKC,OACfC,EAAMD,EAAGE,iBAAiB,eAEvBC,MAAMC,KAAKH,GAAKI,gBAAQC,EAAKN,UAClCM,EAAIN,EAAGO,IAAMP,EACNM,GACN,IAGE,SAASE,EAAKC,kBAAM,QAEpBC,EA7CP,SAAqBA,WACfC,GAAO,EACPC,GAAU,EACVC,EAAM,GACNN,EAAK,GACLO,EAAY,GAEPC,EAAI,EAAGA,EAAIL,EAAMM,OAAQD,IAAK,KAC/BE,EAAOP,EAAMK,GACN,MAATE,GACFL,GAAU,EACVD,GAAO,EACHG,EAAUE,OAAS,IACrBF,GAAa,MAEG,MAATG,GACTN,GAAO,EACPC,GAAU,GACDD,EACTJ,GAAMU,EACGL,EACTE,GAAaG,EAEbJ,GAAOI,QAIJ,CACLJ,IAAKA,GAAO,SACZN,YACAO,GAeWI,CADCT,EAAI,IAIdU,EAAQ,CAACC,MAAOV,EAAMI,UAAWP,GAAIG,EAAMH,IAC3Cc,EAAW,GAIZrB,EAAKsB,SAASC,cANRb,EAAMG,KAQZW,SAAuBf,EAAI,SAGV,WAAlBe,GAA+Bf,EAAI,GAAGO,OAItCK,EAD0B,WAAlBG,EACG,CAACf,EAAI,IAENA,EAAIgB,MAAM,IALtBN,EAAQO,iBAAIP,EAAUV,EAAI,IAC1BY,EAAWZ,EAAIgB,MAAM,IAQtBC,OAAOC,KAAKR,GAAOS,iBAAQC,GAIb,MAHAA,EAAKJ,MAAM,EAAE,GAIxBzB,EAAG6B,GAAQV,EAAMU,GAEE,KAAhBV,EAAMU,IACP7B,EAAG8B,aAAaD,EAAMV,EAAMU,MAMjCR,EAASO,iBAAQG,GACC,iBAANA,EACR/B,EAAGgC,YAAcD,EAEjB/B,EAAGiC,YAAYzB,EAAKuB,MAIjB/B"}